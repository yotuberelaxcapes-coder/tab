name: Dizi Link Scraper Bot

on:
  schedule:
    - cron: '0 0 * * *' 
  workflow_dispatch: 

jobs:
  scrape-links:
    runs-on: ubuntu-latest

    steps:
    - name: Depoyu Klonla
      uses: actions/checkout@v4

    - name: Python Kurulumu
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'

    - name: Sanal Ekran (Xvfb) Kurulumu
      run: sudo apt-get update && sudo apt-get install -y xvfb

    - name: Kütüphaneleri Yükle ve Tarayıcıyı Kur
      run: |
        python -m pip install --upgrade pip
        # playwright-stealth kütüphanesini ekliyoruz
        pip install playwright playwright-stealth beautifulsoup4
        playwright install chromium

    - name: Scraper Scriptini Çalıştır
      # Scripti sanal bir ekranda (headless olmadan) çalıştırıyoruz
      run: xvfb-run --auto-servernum --server-args="-screen 0 1280x1024x24" python scraper.py
